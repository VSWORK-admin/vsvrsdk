## Documentation ##

### I. Purpose
> This project is an extension for the VSVR SDK, used to generate the bytes bytecode required by the VSVR interaction SDK.

> When writing VSVR interaction logic, check out this project locally, and write the VSVR C# interaction code in this project. It is recommended to use VisualStudio for development.

> Download VSVRDevTool: https://oss.vswork.vip/Files/vsvr/2.7.3/VSVR-DevTools_v2.7.3.zip
> Download Scene Package Encryption Tool: https://oss.vswork.vip/Files/vsvr/VSVRCryptTool1.0.zip

### II. Steps to Use
#### 2.1 Writing Interaction Logic Code
##### 2.1.1 Create Script File
Create a `*.cs` file under the directory ```/Dll_Project/```, naming the file the same as the class name, such as `ClickDemo.cs` in the project example (**located in vsvrsdk project/Assets/Scenes/ILruntimeSample/**).

##### 2.1.2 Inherit Class
The code cannot directly inherit the MonoBehaviour class but must inherit the DllGenerateBase wrapper class instead.

#### 2.2 Generating Bytecode
##### 2.2.1 Set Build Events

Create a ```DllProject``` folder in the root directory of the Unity project, place the project in this folder, and specify the ```.bytes``` file to the relative directory, such as:
```
copy "$(TargetDir)$(ProjectName).dll" "$(SolutionDir)..\..\Assets\Scenes\ILruntimeSample\$(ProjectName).dll.bytes"

copy "$(TargetDir)$(ProjectName).pdb" "$(SolutionDir)..\..\Assets\Scenes\ILruntimeSample\$(ProjectName).pdb.bytes"
```

##### 2.2.2 Generate Bytecode
Set the solution configuration to ```Release```.

Click Build -> Build Solution, and two ```.bytes``` files will be automatically created, namely:
```Dll_Project.dll.bytes``` and ```Dll_Project.pdb.bytes```. These two files are the interaction logic bytecode files needed by the Unity scene.

After setting the post-build event command line configuration to the scene path in the Unity project directory, the generated bytecode files will be automatically placed in the Unity scene path. If you keep the default ```$(ProjectDir)unitybytes```, you need to manually copy the two bytecode files in ```unitybytes``` to the scene directory in the Unity project after generation.

#### 2.3 Unity Project Configuration
##### 2.3.1 Configure Bytecode Loading
Drag the ```DllManager.cs``` component into any object in the SDK scene (**only one ```DllManager.cs``` component can exist in a scene**), and then drag ```Dll_Project.dll.bytes``` and ```Dll_Project.pdb.bytes``` into ```DllAsset``` and ```PdbAsset``` respectively.

##### 2.3.2 Configure Interaction Scripts
Drag the ```GeneralDllBehaviorAdapter``` component into any object in the SDK scene, and fill in the wrapper class name in ```ScriptClassName``` (if there is a namespace, it must include the namespace name, such as ```Dll_Project.ClickDemo```. If there is no namespace, just enter the class name, such as ```ClickDemo```), and this class can be used like a regular MonoBehaviour class in Unity.

#### 2.4 Writing Code

To obtain the Extral Datas and Extral Datas Objs configured in the Unity Inspector:

In the Init method, get the first element of the ExtralDatas array obtained from BaseMono, which is the object configured in Extral Datas.
```
        public Transform targetTransform; // Custom target Transform object

        // Override the Init method for initialization
        public override void Init()
        {
            targetTransform = BaseMono.ExtralDatas[0].Target; // Get the object dragged into the Inspector window in Unity
            Debug.Log("Click_Demo Init!");
        }
```

#### 2.5 Debugging with Breakpoints

###### 2.5.1 Install plugin
In Visual Studio, go to Extensions -> Manage Extensions, search for "ILRuntime" and install the ILRuntime Debugger plugin.

###### 2.5.2 Start Debugging

Click on Debug -> Attach to ILRuntime, then specify the address and port by setting RemoteHost: 127.0.0.1:56001 and click Attach.